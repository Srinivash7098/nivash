<?php
// Check if the form is submitted
if(isset($_POST['submit'])){
    // Define the upload directory
    $target_dir = "uploads/";

    // Get the number of files uploaded
    $countfiles = count($_FILES['file']['name']);

    // Loop through all the uploaded files
    for($i=0;$i<$countfiles;$i++){

        // Get the name of the uploaded file
        $filename = $_FILES['file']['name'][$i];

        // Get the temporary name of the uploaded file
        $tempname = $_FILES['file']['tmp_name'][$i];

        // Set the target path for the uploaded file
        $target_file = $target_dir . basename($filename);

        // Move the uploaded file to the target directory
        move_uploaded_file($tempname, $target_file);

        // Save the file path to the database
        $conn = mysqli_connect("localhost", "username", "password", "database_name");
        $query = "INSERT INTO files (file_path) VALUES ('$target_file')";
        mysqli_query($conn, $query);
        mysqli_close($conn);
    }
}

// Retrieve the uploaded files from the database
$conn = mysqli_connect("localhost", "username", "password", "database_name");
$query = "SELECT * FROM files";
$result = mysqli_query($conn, $query);
?>

<!-- Display the uploaded files on the webpage -->
<html>
<head>
    <title>Upload Files</title>
</head>
<body>
    <h1>Uploaded Files</h1>
    <?php while($row = mysqli_fetch_array($result)): ?>
        <a href="<?php echo $row['file_path']; ?>"><?php echo $row['file_path']; ?></a><br>
    <?php endwhile; ?>
    <h2>Upload New Files</h2>
    <form action="" method="post" enctype="multipart/form-data">
        <input type="file" name="file[]" multiple>
        <input type="submit" name="submit" value="Upload">
    </form>
</body>
</html>
